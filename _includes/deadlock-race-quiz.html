<div class="quiz" id="quiz-deadlock-race-quiz">
  <h3>Test Your Understanding</h3>
  <div class="quiz-container">
    <div class="quiz-question" id="q-deadlock-race-quiz-1" style="display: block;">
      <p class="quiz-question-text"><strong>1. Which symptom indicates a race condition rather than a deadlock?</strong></p>
      <div class="quiz-options">
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-1" value="1" data-correct="true">
          <span>Program produces wrong data silently</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-1" value="2" data-correct="false">
          <span>Program hangs and never responds</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-1" value="3" data-correct="false">
          <span>A deadlock exception is thrown</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-1" value="4" data-correct="false">
          <span>Threads refuse to acquire locks</span>
        </label>
      </div>
      <button class="quiz-btn-check" onclick="checkAnswer(event, 'deadlock-race-quiz', 1, 'Race conditions cause silent data corruption. The program runs but produces wrong results. Deadlocks cause the program to hang.')">Check Answer</button>
      <div class="quiz-feedback" id="feedback-deadlock-race-quiz-1" style="display: none;">
        <p class="quiz-feedback-text"></p>
        <p class="quiz-explanation"></p>
      </div>
    </div>

    <div class="quiz-question" id="q-deadlock-race-quiz-2" style="display: none;">
      <p class="quiz-question-text"><strong>2. What causes a deadlock?</strong></p>
      <div class="quiz-options">
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-2" value="1" data-correct="false">
          <span>Two threads accessing the same variable without synchronization</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-2" value="2" data-correct="true">
          <span>Circular lock dependency - threads wait for each other in a circle</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-2" value="3" data-correct="false">
          <span>Using AtomicInteger instead of synchronized</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-2" value="4" data-correct="false">
          <span>Threads taking too long to execute</span>
        </label>
      </div>
      <button class="quiz-btn-check" onclick="checkAnswer(event, 'deadlock-race-quiz', 2, 'Deadlock occurs when threads form a circular dependency waiting for locks. Thread A waits for lock held by Thread B, while Thread B waits for lock held by Thread A, creating a circular wait.')">Check Answer</button>
      <div class="quiz-feedback" id="feedback-deadlock-race-quiz-2" style="display: none;">
        <p class="quiz-feedback-text"></p>
        <p class="quiz-explanation"></p>
      </div>
    </div>

    <div class="quiz-question" id="q-deadlock-race-quiz-3" style="display: none;">
      <p class="quiz-question-text"><strong>3. How do you prevent deadlocks?</strong></p>
      <div class="quiz-options">
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-3" value="1" data-correct="true">
          <span>Always acquire locks in the same order</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-3" value="2" data-correct="false">
          <span>Use more locks to prevent conflicts</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-3" value="3" data-correct="false">
          <span>Synchronize all methods in a class</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-3" value="4" data-correct="false">
          <span>Use single-threaded code exclusively</span>
        </label>
      </div>
      <button class="quiz-btn-check" onclick="checkAnswer(event, 'deadlock-race-quiz', 3, 'Consistent lock ordering prevents deadlocks. If Thread 1 always locks A then B, and Thread 2 also locks A then B (in the same order), they cannot form a circular dependency.')">Check Answer</button>
      <div class="quiz-feedback" id="feedback-deadlock-race-quiz-3" style="display: none;">
        <p class="quiz-feedback-text"></p>
        <p class="quiz-explanation"></p>
      </div>
    </div>

    <div class="quiz-question" id="q-deadlock-race-quiz-4" style="display: none;">
      <p class="quiz-question-text"><strong>4. In the Counter example, why is count++ not atomic?</strong></p>
      <div class="quiz-options">
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-4" value="1" data-correct="true">
          <span>It's three operations: read, add, write - other threads can interrupt between them</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-4" value="2" data-correct="false">
          <span>The ++ operator doesn't work on integers</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-4" value="3" data-correct="false">
          <span>It requires two threads to execute</span>
        </label>
        <label class="quiz-option">
          <input type="radio" name="q-deadlock-race-quiz-4" value="4" data-correct="false">
          <span>Java doesn't support increment operations</span>
        </label>
      </div>
      <button class="quiz-btn-check" onclick="checkAnswer(event, 'deadlock-race-quiz', 4, 'count++ appears atomic but it is actually three steps: (1) read current value, (2) add 1, (3) write back. Another thread can read the old value between these steps, causing a lost update.')">Check Answer</button>
      <div class="quiz-feedback" id="feedback-deadlock-race-quiz-4" style="display: none;">
        <p class="quiz-feedback-text"></p>
        <p class="quiz-explanation"></p>
      </div>
    </div>

    <div class="quiz-navigation">
      <button class="quiz-btn-nav" id="btn-prev-deadlock-race-quiz" onclick="prevQuestion('deadlock-race-quiz', 4)" style="display: none;">Previous</button>
      <span class="quiz-progress" id="progress-deadlock-race-quiz">1 / 4</span>
      <button class="quiz-btn-nav" id="btn-next-deadlock-race-quiz" onclick="nextQuestion('deadlock-race-quiz', 4)">Next</button>
    </div>

    <button class="quiz-btn-reset" onclick="resetQuiz('deadlock-race-quiz', 4)">Reset Quiz</button>
  </div>
</div>
